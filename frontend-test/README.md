# 微信客服用户画像系统 - 前端测试页面

这是一个简单的HTML/JavaScript前端测试页面，用于测试后端API接口的所有功能。

## 🚀 快速开始

### 1. 启动后端服务器

首先确保后端服务器正在运行：

```bash
cd "D:\My project\qiwei"
python run.py
```

服务器将在 `http://localhost:3001` 上运行。

### 2. 打开前端测试页面

直接用浏览器打开 `index.html` 文件即可，或者使用本地服务器：

```bash
# 使用Python内置服务器（推荐）
cd "D:\My project\qiwei\frontend-test"
python -m http.server 8080

# 然后在浏览器访问 http://localhost:8080
```

## 📋 功能特性

### 🔧 连接管理
- **服务器连接测试**: 测试与后端API的连接状态
- **实时状态显示**: 显示服务器在线/离线状态
- **自定义服务器地址**: 支持修改后端服务器地址

### 🔐 用户认证
- **简单登录**: 使用微信用户ID登录
- **Token管理**: 自动管理认证Token
- **登录状态保持**: 刷新页面后保持登录状态

### 📊 数据查看
- **画像列表**: 分页显示用户画像列表
- **详情查看**: 点击画像卡片查看详细信息
- **统计信息**: 实时显示用户数据统计
- **搜索功能**: 支持按姓名、公司、职位搜索

### 🔍 高级功能
- **实时更新**: 自动检查新的画像数据（30秒轮询）
- **API日志**: 显示所有API调用的详细日志
- **响应时间**: 显示每个API调用的响应时间
- **错误处理**: 完整的错误信息显示

## 🎯 测试步骤

### 1. 基础连接测试
1. 打开页面后，点击"测试连接"按钮
2. 确认服务器状态显示为"在线"

### 2. 用户登录测试
1. 在"微信用户ID"输入框中输入测试用户ID（例如：`test_user_001`）
2. 点击"登录"按钮
3. 确认登录成功，右上角显示当前用户

### 3. API功能测试
按顺序测试以下功能：

1. **获取画像列表**: 查看是否能正常加载用户画像
2. **获取统计信息**: 查看用户数据统计是否正确
3. **搜索画像**: 测试搜索功能
4. **最近画像**: 获取最新的画像数据
5. **用户信息**: 查看当前用户的详细信息
6. **检查更新**: 测试实时更新检查

### 4. 详细功能测试
1. **画像详情**: 点击任意画像卡片查看详情
2. **删除画像**: 在详情页面测试删除功能
3. **分页功能**: 如果有多页数据，测试分页
4. **实时监听**: 开启自动刷新，测试实时更新

## 💡 界面说明

### 左侧控制面板
- **连接设置**: 配置和测试服务器连接
- **用户登录**: 用户认证功能
- **API测试**: 快速测试各种API接口
- **实时更新**: 配置自动更新监听

### 右侧数据展示
- **统计卡片**: 显示用户数据统计
- **搜索框**: 支持全文搜索
- **画像列表**: 卡片式显示用户画像
- **API日志**: 显示所有API调用记录

## 🔧 技术特性

### 前端技术栈
- **HTML5**: 语义化结构
- **Bootstrap 5**: 响应式UI框架
- **Font Awesome**: 图标库
- **原生JavaScript**: 无框架依赖

### 核心功能模块
- **APIClient类**: 封装所有API调用逻辑
- **App类**: 主应用逻辑和UI控制
- **响应式设计**: 支持各种屏幕尺寸
- **实时日志**: 详细的API调用追踪

## 🐛 调试功能

### API调用日志
- 显示每个API调用的详细信息
- 包含请求方法、URL、状态码、响应时间
- 可查看完整的请求和响应数据
- 支持清空日志功能

### 错误处理
- 网络错误自动重试机制
- 详细的错误信息显示
- 用户友好的错误提示
- 自动状态恢复

## 📱 移动端支持

页面采用响应式设计，支持：
- 手机端访问
- 平板端访问
- 触摸操作优化
- 移动端友好的交互

## 🔄 实时更新机制

### 自动轮询
- 每30秒检查一次更新
- 发现新数据自动刷新界面
- 可手动开启/关闭监听
- 显示最后检查时间

### 手动刷新
- 支持手动检查更新
- 一键刷新所有数据
- 实时状态指示

## 🚨 注意事项

1. **CORS问题**: 如果遇到跨域问题，请确保后端已配置CORS
2. **浏览器兼容**: 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
3. **网络连接**: 确保前端能访问后端服务器地址
4. **数据权限**: 每个用户只能看到自己的画像数据

## 🔧 自定义配置

### 修改服务器地址
在页面上的"服务器地址"输入框中修改，或者直接修改 `api-client.js` 中的默认地址：

```javascript
class APIClient {
    constructor(baseURL = 'http://your-server:3001') {
        // ...
    }
}
```

### 调整轮询间隔
修改 `app.js` 中的轮询间隔（毫秒）：

```javascript
this.autoRefreshInterval = setInterval(async () => {
    // ...
}, 30000); // 修改这个值
```

## 🎉 使用建议

1. **首次使用**: 先测试连接，再登录，然后逐个测试API功能
2. **数据测试**: 可以先通过微信客服发送消息生成一些测试数据
3. **功能验证**: 重点测试分页、搜索、删除等核心功能
4. **性能观察**: 注意观察API响应时间和错误率
5. **移动端测试**: 建议在不同设备上测试界面效果